<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRIMES AND PUNISHMENTS - 开场动画</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=MedievalSharp&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background-color: #0a0a0a;
            color: #d4af37;
            font-family: 'Cinzel', serif;
            overflow: hidden;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: radial-gradient(circle at 30% 30%, #1a1a1a 0%, #0a0a0a 70%);
        }
        
        .container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
        
        /* 背景装饰 */
        .background-pattern {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(212, 175, 55, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(139, 69, 19, 0.03) 0%, transparent 50%);
            z-index: 1;
        }
        
        .logo-container {
            position: relative;
            text-align: center;
            z-index: 10;
            max-width: 90%;
        }
        
        .image-logo {
            width: 200px;
            height: 200px;
            margin: 0 auto 2.5rem;
            border-radius: 50%;
            background: linear-gradient(135deg, #d4af37, #8B4513, #5d4037);
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 
                0 0 30px rgba(212, 175, 55, 0.6),
                inset 0 0 20px rgba(0, 0, 0, 0.3);
            opacity: 0;
            animation: logoEntrance 2s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards 0.5s;
            position: relative;
            overflow: hidden;
            border: 3px solid rgba(212, 175, 55, 0.7);
        }
        
          /* logo图片背景 */
        .image-logo::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: url('../STELLA/logo.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            border-radius: 50%;
            z-index: 1;
            filter: brightness(1.1) contrast(1.05);
            transform: scale(1.05);
        }
        
        .image-logo::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 70% 70%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
            border-radius: 50%;
        }
        
        .main-title {
            font-size: 4.8rem;
            font-weight: bold;
            letter-spacing: 8px;
            margin-bottom: 1.5rem;
            text-shadow: 
                0 0 10px rgba(212, 175, 55, 0.7),
                0 0 20px rgba(212, 175, 55, 0.5),
                0 0 30px rgba(139, 69, 19, 0.3);
            opacity: 0;
            background: linear-gradient(to right, #d4af37, #f1c27d, #d4af37);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: titleEntrance 2s forwards 1.5s;
            position: relative;
        }
        
        .main-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(to right, transparent, #d4af37, transparent);
            opacity: 0;
            animation: lineReveal 1.5s forwards 2.5s;
        }
        
        .subtitle {
            font-size: 3rem;
            letter-spacing: 6px;
            margin-bottom: 2.5rem;
            text-shadow: 
                0 0 8px rgba(212, 175, 55, 0.6),
                0 0 15px rgba(139, 69, 19, 0.3);
            opacity: 0;
            animation: subtitleEntrance 2s forwards 2s;
            color: #f1c27d;
            position: relative;
        }
        
        .typewriter-container {
            margin: 2rem 0;
            opacity: 0;
            animation: fadeIn 1s forwards 3.5s;
        }
        
        .typewriter {
            overflow: hidden;
            border-right: 2px solid #d4af37;
            white-space: nowrap;
            margin: 0 auto;
            letter-spacing: 2px;
            font-size: 1.5rem;
            animation: typing 3.5s steps(40, end) forwards, blink-caret 0.75s step-end infinite;
            text-shadow: 0 0 5px rgba(212, 175, 55, 0.5);
        }
        
        .start-button {
            margin-top: 3rem;
            padding: 15px 40px;
            background: transparent;
            border: 2px solid #d4af37;
            color: #d4af37;
            font-size: 1.3rem;
            letter-spacing: 3px;
            cursor: pointer;
            transition: all 0.4s ease;
            opacity: 0;
            animation: fadeIn 1s forwards 6.5s;
            position: relative;
            overflow: hidden;
            font-family: 'Cinzel', serif;
            text-transform: uppercase;
            display: inline-block;
            text-decoration: none;
        }
        
        .start-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.2), transparent);
            transition: all 0.6s;
        }
        
        .start-button:hover {
            background: rgba(212, 175, 55, 0.1);
            box-shadow: 
                0 0 15px rgba(212, 175, 55, 0.5),
                0 0 30px rgba(139, 69, 19, 0.3);
            transform: translateY(-3px);
        }
        
        .start-button:hover::before {
            left: 100%;
        }
        
        /* 侦探元素 */
        .detective-elements {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 5;
        }
        
        /* 重新设计的烟斗 - 口向上 */
        .pipe-container {
            position: absolute;
            top: 20%;
            left: 10%;
            width: 150px;
            height: 100px;
            opacity: 0;
            animation: elementEntrance 2s forwards 3s;
            z-index: 6;
        }
        
        .pipe {
            position: absolute;
            width: 120px;
            height: 30px;
            transform: rotate(0deg); /* 口向上 */
        }
        
        /* 烟嘴 - 红色 */
        .pipe-stem {
            position: absolute;
            width: 80px;
            height: 12px;
            background: #ff5252;
            border-radius: 6px;
            top: 9px;
            left: 0;
            box-shadow: 
                0 0 5px rgba(255, 82, 82, 0.7),
                inset 0 0 5px rgba(255, 255, 255, 0.3);
        }
        
        /* 烟嘴圆形装饰 */
        .pipe-stem::before {
            content: '';
            position: absolute;
            width: 15px;
            height: 15px;
            background: #ff5252;
            border-radius: 50%;
            top: -1.5px;
            right: -7.5px;
            box-shadow: 
                0 0 5px rgba(255, 82, 82, 0.7),
                inset 0 0 5px rgba(255, 255, 255, 0.3);
        }
        
        /* 烟杆 - 深棕色 */
        .pipe-shaft {
            position: absolute;
            width: 70px;
            height: 16px;
            background: #8B4513;
            border-radius: 8px;
            top: 7px;
            left: 45px;
            box-shadow: 
                0 0 5px rgba(139, 69, 19, 0.7),
                inset 0 0 5px rgba(255, 255, 255, 0.1);
        }
        
        /* 烟杆的分段凸起纹理 */
        .pipe-shaft::before,
        .pipe-shaft::after {
            content: '';
            position: absolute;
            width: 5px;
            height: 100%;
            background: #a05a2c;
            border-radius: 2px;
        }
        
        .pipe-shaft::before {
            left: 15px;
        }
        
        .pipe-shaft::after {
            right: 15px;
        }
        
        /* 烟锅 - 浅米色，口向上 */
        .pipe-bowl {
            position: absolute;
            width: 30px;
            height: 30px;
            background: #f5f5dc;
            border-radius: 50%;
            top: 0;
            left: 90px;
            box-shadow: 
                0 0 8px rgba(245, 245, 220, 0.7),
                inset 0 0 8px rgba(255, 255, 255, 0.5);
        }
        
        /* 烟锅开口 */
        .pipe-bowl::before {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            background: #e8e8d0;
            border-radius: 50%;
            top: 5px;
            left: 5px;
            box-shadow: 
                inset 0 0 5px rgba(0, 0, 0, 0.2);
        }
        
        .magnifying-glass {
            position: absolute;
            bottom: 25%;
            right: 10%;
            width: 80px;
            height: 80px;
            border: 4px solid #d4af37;
            border-radius: 50%;
            opacity: 0;
            animation: elementEntrance 2s forwards 3.5s;
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.5);
        }
        
        .magnifying-glass::after {
            content: '';
            position: absolute;
            bottom: -25px;
            right: -5px;
            width: 6px;
            height: 50px;
            background: #d4af37;
            transform: rotate(-45deg);
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
        }
        
        /* 重新设计的烟雾效果 - 从烟斗口冒出 */
        .smoke-container {
            position: absolute;
            top: 20%; /* 烟斗容器位置 */
            left: 10%; /* 烟斗容器位置 */
            width: 150px;
            height: 100px;
            pointer-events: none;
            z-index: 7;
        }
        
        .smoke {
            position: absolute;
            border-radius: 50%;
            opacity: 0;
            filter: blur(8px);
            top: 15px; /* 烟斗口位置 */
            left: 105px; /* 烟斗口位置 */
        }
        
        /* 不同大小的烟雾 */
        .smoke-1, .smoke-2, .smoke-3 {
            width: 30px;
            height: 30px;
            background: radial-gradient(circle, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0) 70%);
        }
        
        .smoke-4, .smoke-5, .smoke-6 {
            width: 40px;
            height: 40px;
            background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0) 70%);
        }
        
        .smoke-7, .smoke-8, .smoke-9 {
            width: 25px;
            height: 25px;
            background: radial-gradient(circle, rgba(255,255,255,0.7) 0%, rgba(255,255,255,0) 70%);
        }
        
        .smoke-1 {
            animation: smokeRise1 6s ease-out infinite;
            animation-delay: 3.5s;
        }
        
        .smoke-2 {
            animation: smokeRise2 7s ease-out infinite;
            animation-delay: 4s;
        }
        
        .smoke-3 {
            animation: smokeRise3 5.5s ease-out infinite;
            animation-delay: 4.5s;
        }
        
        .smoke-4 {
            animation: smokeRise4 6.5s ease-out infinite;
            animation-delay: 5s;
        }
        
        .smoke-5 {
            animation: smokeRise5 7.5s ease-out infinite;
            animation-delay: 5.5s;
        }
        
        .smoke-6 {
            animation: smokeRise6 6s ease-out infinite;
            animation-delay: 6s;
        }
        
        .smoke-7 {
            animation: smokeRise7 5.8s ease-out infinite;
            animation-delay: 6.5s;
        }
        
        .smoke-8 {
            animation: smokeRise8 7.2s ease-out infinite;
            animation-delay: 7s;
        }
        
        .smoke-9 {
            animation: smokeRise9 6.8s ease-out infinite;
            animation-delay: 7.5s;
        }
        
        /* 优化后的飘动纸张效果 */
        .paper {
            position: absolute;
            border-radius: 5px;
            opacity: 0;
            box-shadow: 
                0 2px 10px rgba(0, 0, 0, 0.3),
                inset 0 0 5px rgba(255, 255, 255, 0.3);
            animation: paperFloat 15s linear infinite;
            transform-origin: center;
            z-index: 2;
            overflow: hidden;
        }

        /* 纸张纹理 */
        .paper::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                linear-gradient(90deg, transparent 95%, rgba(0,0,0,0.03) 100%),
                linear-gradient(rgba(0,0,0,0.03) 1px, transparent 1px);
            background-size: 20px 20px;
            opacity: 0.4;
            pointer-events: none;
        }

        /* 纸张内容效果 */
        .paper::after {
            content: '';
            position: absolute;
            top: 10%;
            left: 10%;
            right: 10%;
            height: 1px;
            background: rgba(0, 0, 0, 0.1);
            box-shadow: 
                0 10px 0 rgba(0, 0, 0, 0.1),
                0 20px 0 rgba(0, 0, 0, 0.1),
                0 30px 0 rgba(0, 0, 0, 0.1),
                0 40px 0 rgba(0, 0, 0, 0.1),
                0 50px 0 rgba(0, 0, 0, 0.1);
        }

        /* 每张纸都有独特的飘动路径和样式 */
        .paper-1 {
            top: 10%;
            left: 5%;
            animation: paperFloat1 18s linear infinite;
            animation-delay: 0s;
            width: 70px;
            height: 90px;
            transform: rotate(5deg);
            background: linear-gradient(135deg, #fafafa, #f0f0e6);
            box-shadow: 
                0 2px 8px rgba(0, 0, 0, 0.2),
                inset 0 0 8px rgba(255, 255, 255, 0.5);
        }
        
        .paper-2 {
            top: 70%;
            right: 5%;
            animation: paperFloat2 22s linear infinite;
            animation-delay: 3s;
            width: 85px;
            height: 110px;
            transform: rotate(-8deg);
            background: linear-gradient(135deg, #f8f8eb, #e8e8d8);
            box-shadow: 
                0 2px 10px rgba(0, 0, 0, 0.25),
                inset 0 0 8px rgba(255, 255, 255, 0.4);
        }
        
        .paper-3 {
            top: 40%;
            left: 3%;
            animation: paperFloat3 20s linear infinite;
            animation-delay: 7s;
            width: 75px;
            height: 95px;
            transform: rotate(12deg);
            background: linear-gradient(135deg, #fcfcf5, #ecece2);
            box-shadow: 
                0 2px 9px rgba(0, 0, 0, 0.22),
                inset 0 0 8px rgba(255, 255, 255, 0.45);
        }
        
        .paper-4 {
            top: 20%;
            right: 8%;
            animation: paperFloat4 25s linear infinite;
            animation-delay: 5s;
            width: 90px;
            height: 120px;
            transform: rotate(-15deg);
            background: linear-gradient(135deg, #f5f5e6, #e5e5d5);
            box-shadow: 
                0 2px 12px rgba(0, 0, 0, 0.3),
                inset 0 0 8px rgba(255, 255, 255, 0.35);
        }
        
        .paper-5 {
            top: 60%;
            left: 10%;
            animation: paperFloat5 19s linear infinite;
            animation-delay: 10s;
            width: 65px;
            height: 85px;
            transform: rotate(3deg);
            background: linear-gradient(135deg, #fafaf2, #eaeadf);
            box-shadow: 
                0 2px 7px rgba(0, 0, 0, 0.18),
                inset 0 0 8px rgba(255, 255, 255, 0.5);
        }
        
        .paper-6 {
            top: 30%;
            right: 2%;
            animation: paperFloat6 23s linear infinite;
            animation-delay: 12s;
            width: 80px;
            height: 105px;
            transform: rotate(-10deg);
            background: linear-gradient(135deg, #f7f7ed, #e7e7dc);
            box-shadow: 
                0 2px 9px rgba(0, 0, 0, 0.22),
                inset 0 0 8px rgba(255, 255, 255, 0.4);
        }
        
        /* 动画定义 */
        @keyframes logoEntrance {
            0% { 
                opacity: 0;
                transform: scale(0.5) rotate(-180deg);
            }
            70% {
                transform: scale(1.1) rotate(10deg);
            }
            100% { 
                opacity: 1;
                transform: scale(1) rotate(0deg);
            }
        }
        
        @keyframes titleEntrance {
            0% { 
                opacity: 0;
                transform: translateY(50px);
                letter-spacing: 20px;
            }
            100% { 
                opacity: 1;
                transform: translateY(0);
                letter-spacing: 8px;
            }
        }
        
        @keyframes subtitleEntrance {
            0% { 
                opacity: 0;
                transform: translateY(30px);
            }
            100% { 
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes lineReveal {
            0% { 
                opacity: 0;
                width: 0;
            }
            100% { 
                opacity: 1;
                width: 100%;
            }
        }
        
        @keyframes elementEntrance {
            0% { 
                opacity: 0;
                transform: translateY(30px) scale(0.8);
            }
            100% { 
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes typing {
            from { width: 0; opacity: 1; }
            to { width: 100%; opacity: 1; }
        }
        
        @keyframes blink-caret {
            from, to { border-color: transparent; }
            50% { border-color: #d4af37; }
        }
        
        /* 增强的烟雾上升动画 - 更加明显 */
        @keyframes smokeRise1 {
            0% { 
                transform: translate(0, 0) scale(0.5);
                opacity: 0;
            }
            20% {
                opacity: 0.9;
                transform: translate(-5px, -20px) scale(0.8);
            }
            50% {
                opacity: 0.7;
                transform: translate(8px, -60px) scale(1.1);
            }
            80% {
                opacity: 0.4;
                transform: translate(-3px, -100px) scale(1.3);
            }
            100% { 
                transform: translate(5px, -150px) scale(1.5);
                opacity: 0;
            }
        }
        
        @keyframes smokeRise2 {
            0% { 
                transform: translate(0, 0) scale(0.5);
                opacity: 0;
            }
            20% {
                opacity: 0.9;
                transform: translate(8px, -25px) scale(0.8);
            }
            50% {
                opacity: 0.7;
                transform: translate(-10px, -70px) scale(1.1);
            }
            80% {
                opacity: 0.4;
                transform: translate(5px, -120px) scale(1.3);
            }
            100% { 
                transform: translate(-8px, -180px) scale(1.5);
                opacity: 0;
            }
        }
        
        @keyframes smokeRise3 {
            0% { 
                transform: translate(0, 0) scale(0.5);
                opacity: 0;
            }
            20% {
                opacity: 0.9;
                transform: translate(-10px, -15px) scale(0.8);
            }
            50% {
                opacity: 0.7;
                transform: translate(5px, -50px) scale(1.1);
            }
            80% {
                opacity: 0.4;
                transform: translate(-8px, -90px) scale(1.3);
            }
            100% { 
                transform: translate(10px, -140px) scale(1.5);
                opacity: 0;
            }
        }
        
        @keyframes smokeRise4 {
            0% { 
                transform: translate(0, 0) scale(0.5);
                opacity: 0;
            }
            20% {
                opacity: 0.9;
                transform: translate(12px, -18px) scale(0.8);
            }
            50% {
                opacity: 0.7;
                transform: translate(-7px, -55px) scale(1.1);
            }
            80% {
                opacity: 0.4;
                transform: translate(10px, -95px) scale(1.3);
            }
            100% { 
                transform: translate(-12px, -145px) scale(1.5);
                opacity: 0;
            }
        }
        
        @keyframes smokeRise5 {
            0% { 
                transform: translate(0, 0) scale(0.5);
                opacity: 0;
            }
            20% {
                opacity: 0.9;
                transform: translate(-15px, -22px) scale(0.8);
            }
            50% {
                opacity: 0.7;
                transform: translate(12px, -65px) scale(1.1);
            }
            80% {
                opacity: 0.4;
                transform: translate(-10px, -110px) scale(1.3);
            }
            100% { 
                transform: translate(15px, -165px) scale(1.5);
                opacity: 0;
            }
        }
        
        @keyframes smokeRise6 {
            0% { 
                transform: translate(0, 0) scale(0.5);
                opacity: 0;
            }
            20% {
                opacity: 0.9;
                transform: translate(7px, -20px) scale(0.8);
            }
            50% {
                opacity: 0.7;
                transform: translate(-5px, -60px) scale(1.1);
            }
            80% {
                opacity: 0.4;
                transform: translate(8px, -105px) scale(1.3);
            }
            100% { 
                transform: translate(-7px, -160px) scale(1.5);
                opacity: 0;
            }
        }
        
        @keyframes smokeRise7 {
            0% { 
                transform: translate(0, 0) scale(0.5);
                opacity: 0;
            }
            20% {
                opacity: 0.9;
                transform: translate(-8px, -25px) scale(0.8);
            }
            50% {
                opacity: 0.7;
                transform: translate(10px, -70px) scale(1.1);
            }
            80% {
                opacity: 0.4;
                transform: translate(-5px, -120px) scale(1.3);
            }
            100% { 
                transform: translate(8px, -180px) scale(1.5);
                opacity: 0;
            }
        }
        
        @keyframes smokeRise8 {
            0% { 
                transform: translate(0, 0) scale(0.5);
                opacity: 0;
            }
            20% {
                opacity: 0.9;
                transform: translate(10px, -18px) scale(0.8);
            }
            50% {
                opacity: 0.7;
                transform: translate(-12px, -55px) scale(1.1);
            }
            80% {
                opacity: 0.4;
                transform: translate(7px, -100px) scale(1.3);
            }
            100% { 
                transform: translate(-10px, -155px) scale(1.5);
                opacity: 0;
            }
        }
        
        @keyframes smokeRise9 {
            0% { 
                transform: translate(0, 0) scale(0.5);
                opacity: 0;
            }
            20% {
                opacity: 0.9;
                transform: translate(-12px, -22px) scale(0.8);
            }
            50% {
                opacity: 0.7;
                transform: translate(15px, -65px) scale(1.1);
            }
            80% {
                opacity: 0.4;
                transform: translate(-8px, -115px) scale(1.3);
            }
            100% { 
                transform: translate(12px, -175px) scale(1.5);
                opacity: 0;
            }
        }
        
        /* 优化后的纸张飘动动画 - 每个都有独特的路径 */
        @keyframes paperFloat1 {
            0% {
                opacity: 0;
                transform: translate(0, 0) rotate(5deg) scale(0.9);
            }
            10% {
                opacity: 0.9;
                transform: translate(20px, -20px) rotate(15deg) scale(1);
            }
            30% {
                transform: translate(40px, -60px) rotate(25deg) scale(1.05);
            }
            50% {
                transform: translate(60px, -120px) rotate(35deg) scale(1.1);
            }
            70% {
                transform: translate(80px, -180px) rotate(45deg) scale(1.05);
            }
            90% {
                opacity: 0.8;
                transform: translate(100px, -240px) rotate(55deg) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(120px, -300px) rotate(65deg) scale(0.9);
            }
        }
        
        @keyframes paperFloat2 {
            0% {
                opacity: 0;
                transform: translate(0, 0) rotate(-8deg) scale(0.9);
            }
            10% {
                opacity: 0.9;
                transform: translate(-30px, -30px) rotate(-18deg) scale(1);
            }
            30% {
                transform: translate(-60px, -70px) rotate(-28deg) scale(1.05);
            }
            50% {
                transform: translate(-90px, -130px) rotate(-38deg) scale(1.1);
            }
            70% {
                transform: translate(-120px, -190px) rotate(-48deg) scale(1.05);
            }
            90% {
                opacity: 0.8;
                transform: translate(-150px, -250px) rotate(-58deg) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(-180px, -310px) rotate(-68deg) scale(0.9);
            }
        }
        
        @keyframes paperFloat3 {
            0% {
                opacity: 0;
                transform: translate(0, 0) rotate(12deg) scale(0.9);
            }
            10% {
                opacity: 0.8;
                transform: translate(15px, -25px) rotate(22deg) scale(1);
            }
            30% {
                transform: translate(30px, -65px) rotate(32deg) scale(1.05);
            }
            50% {
                transform: translate(45px, -125px) rotate(42deg) scale(1.1);
            }
            70% {
                transform: translate(60px, -185px) rotate(52deg) scale(1.05);
            }
            90% {
                opacity: 0.7;
                transform: translate(75px, -245px) rotate(62deg) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(90px, -305px) rotate(72deg) scale(0.9);
            }
        }
        
        @keyframes paperFloat4 {
            0% {
                opacity: 0;
                transform: translate(0, 0) rotate(-15deg) scale(0.9);
            }
            10% {
                opacity: 0.85;
                transform: translate(-25px, -15px) rotate(-25deg) scale(1);
            }
            30% {
                transform: translate(-50px, -55px) rotate(-35deg) scale(1.05);
            }
            50% {
                transform: translate(-75px, -115px) rotate(-45deg) scale(1.1);
            }
            70% {
                transform: translate(-100px, -175px) rotate(-55deg) scale(1.05);
            }
            90% {
                opacity: 0.75;
                transform: translate(-125px, -235px) rotate(-65deg) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(-150px, -295px) rotate(-75deg) scale(0.9);
            }
        }
        
        @keyframes paperFloat5 {
            0% {
                opacity: 0;
                transform: translate(0, 0) rotate(3deg) scale(0.9);
            }
            10% {
                opacity: 0.75;
                transform: translate(10px, -35px) rotate(13deg) scale(1);
            }
            30% {
                transform: translate(20px, -75px) rotate(23deg) scale(1.05);
            }
            50% {
                transform: translate(30px, -135px) rotate(33deg) scale(1.1);
            }
            70% {
                transform: translate(40px, -195px) rotate(43deg) scale(1.05);
            }
            90% {
                opacity: 0.65;
                transform: translate(50px, -255px) rotate(53deg) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(60px, -315px) rotate(63deg) scale(0.9);
            }
        }
        
        @keyframes paperFloat6 {
            0% {
                opacity: 0;
                transform: translate(0, 0) rotate(-10deg) scale(0.9);
            }
            10% {
                opacity: 0.8;
                transform: translate(-20px, -25px) rotate(-20deg) scale(1);
            }
            30% {
                transform: translate(-40px, -65px) rotate(-30deg) scale(1.05);
            }
            50% {
                transform: translate(-60px, -125px) rotate(-40deg) scale(1.1);
            }
            70% {
                transform: translate(-80px, -185px) rotate(-50deg) scale(1.05);
            }
            90% {
                opacity: 0.7;
                transform: translate(-100px, -245px) rotate(-60deg) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(-120px, -305px) rotate(-70deg) scale(0.9);
            }
        }
        
        /* 响应式调整 */
        @media (max-width: 768px) {
            .image-logo {
                width: 150px;
                height: 150px;
            }
            
            .main-title {
                font-size: 2.8rem;
                letter-spacing: 4px;
            }
            
            .subtitle {
                font-size: 1.8rem;
                letter-spacing: 3px;
            }
            
            .pipe-container, .magnifying-glass {
                transform: scale(0.7);
            }
            
            .paper {
                width: 60px;
                height: 80px;
            }
            
            .smoke {
                left: 15%;
            }
        }
    </style>
</head>
<body>
    <!-- 全局音乐播放器 -->
    <audio id="global-music" loop style="display: none;"></audio>
    
    <div class="container">
        <!-- 背景装饰 -->
        <div class="background-pattern"></div>
        
        <!-- 侦探元素 -->
        <div class="detective-elements">
            <div class="pipe-container">
                <div class="pipe">
                    <div class="pipe-stem"></div>
                    <div class="pipe-shaft"></div>
                    <div class="pipe-bowl"></div>
                </div>
            </div>
            
            <!-- 烟雾容器 - 增加烟雾数量 -->
            <div class="smoke-container">
                <div class="smoke smoke-1"></div>
                <div class="smoke smoke-2"></div>
                <div class="smoke smoke-3"></div>
                <div class="smoke smoke-4"></div>
                <div class="smoke smoke-5"></div>
                <div class="smoke smoke-6"></div>
                <div class="smoke smoke-7"></div>
                <div class="smoke smoke-8"></div>
                <div class="smoke smoke-9"></div>
            </div>
            
            <div class="magnifying-glass"></div>
            
            <!-- 优化后的飘动纸张 -->
            <div class="paper paper-1"></div>
            <div class="paper paper-2"></div>
            <div class="paper paper-3"></div>
            <div class="paper paper-4"></div>
            <div class="paper paper-5"></div>
            <div class="paper paper-6"></div>
        </div>
        
        <!-- Logo和文字 -->
        <div class="logo-container">
            <div class="image-logo"></div>
            <h1 class="main-title">CRIMES AND PUNISHMENTS</h1>
            <h2 class="subtitle">Stella</h2>
            
            <!-- 修改为链接按钮 -->
            <a href="STELLA.html" class="start-button" onclick="saveMusicState()">进入游戏</a>
        </div>
    </div>

    <script>
        // 简化版全局音乐播放器
        class GlobalMusicPlayer {
            constructor() {
                this.audio = document.getElementById('global-music');
                this.currentMusic = null;
                this.isPlaying = false;
                this.volume = localStorage.getItem('music-volume') ? parseInt(localStorage.getItem('music-volume')) / 100 : 0.3;
                
                this.init();
            }
            
            init() {
                // 设置音量
                this.audio.volume = this.volume;
                
                // 从localStorage加载音乐设置
                this.loadMusicSettings();
                
                // 监听页面可见性变化
                document.addEventListener('visibilitychange', () => {
                    if (document.hidden) {
                        this.handlePageHide();
                    } else {
                        this.handlePageShow();
                    }
                });
            }
            
            loadMusicSettings() {
                const savedMusic = localStorage.getItem('background-music');
                const savedVolume = localStorage.getItem('music-volume');
                const savedPlaying = localStorage.getItem('music-playing');
                
                if (savedMusic && savedMusic !== 'none') {
                    this.changeMusic(savedMusic);
                    
                    if (savedPlaying === 'true') {
                        setTimeout(() => {
                            this.play();
                        }, 1000);
                    }
                }
                
                if (savedVolume) {
                    this.setVolume(parseInt(savedVolume) / 100);
                }
            }
            
            changeMusic(musicType) {
                if (this.currentMusic === musicType) return;
                
                this.currentMusic = musicType;
                let musicUrl = '';
                
                if (musicType.startsWith('imported-')) {
                    const importedMusic = JSON.parse(localStorage.getItem('importedMusic') || '[]');
                    const index = parseInt(musicType.split('-')[1]);
                    if (importedMusic[index]) {
                        musicUrl = importedMusic[index].data;
                    }
                } else if (musicType === 'music1') {
                    musicUrl = '../music/mystery-theme.mp3';
                } else if (musicType === 'music2') {
                    musicUrl = '../music/classical-deduction.mp3';
                }
                
                if (musicUrl) {
                    this.audio.src = musicUrl;
                    this.audio.load();
                    
                    // 保存当前音乐状态
                    this.saveMusicState();
                }
            }
            
            play() {
                if (this.currentMusic && this.currentMusic !== 'none') {
                    this.audio.play().then(() => {
                        this.isPlaying = true;
                        localStorage.setItem('music-playing', 'true');
                        console.log('开场动画音乐开始播放');
                    }).catch(error => {
                        console.log('播放被阻止:', error);
                        this.createPlayOverlay();
                    });
                }
            }
            
            pause() {
                this.audio.pause();
                this.isPlaying = false;
                localStorage.setItem('music-playing', 'false');
            }
            
            stop() {
                this.audio.pause();
                this.audio.currentTime = 0;
                this.isPlaying = false;
                localStorage.setItem('music-playing', 'false');
            }
            
            setVolume(volume) {
                this.volume = volume;
                this.audio.volume = volume;
                localStorage.setItem('music-volume', Math.round(volume * 100));
            }
            
            saveMusicState() {
                localStorage.setItem('background-music', this.currentMusic);
            }
            
            createPlayOverlay() {
                if (document.getElementById('global-music-overlay')) return;
                
                const overlay = document.createElement('div');
                overlay.id = 'global-music-overlay';
                overlay.innerHTML = `
                    <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                               background: rgba(0,0,0,0.7); display: flex; justify-content: center; 
                               align-items: center; z-index: 10000; cursor: pointer;">
                        <div style="background: rgba(0,0,0,0.9); padding: 30px; border-radius: 10px; 
                                   border: 2px solid #d4af37; color: #d4af37; text-align: center;">
                            <h3>点击启用背景音乐</h3>
                            <p>为了获得完整的游戏体验，请点击此处启用背景音乐</p>
                        </div>
                    </div>
                `;
                
                overlay.addEventListener('click', () => {
                    this.play();
                    document.body.removeChild(overlay);
                });
                
                document.body.appendChild(overlay);
            }
            
            handlePageHide() {
                // 页面隐藏时保存播放位置
                if (this.isPlaying) {
                    localStorage.setItem('music-current-time', this.audio.currentTime);
                }
            }
            
            handlePageShow() {
                // 页面显示时恢复播放位置
                const savedTime = localStorage.getItem('music-current-time');
                if (savedTime && this.isPlaying) {
                    this.audio.currentTime = parseFloat(savedTime);
                }
            }
        }

        // 初始化全局音乐播放器
        window.globalMusicPlayer = new GlobalMusicPlayer();

        // 保存音乐状态函数
        function saveMusicState() {
            if (window.globalMusicPlayer) {
                localStorage.setItem('music-playing', window.globalMusicPlayer.isPlaying ? 'true' : 'false');
            }
        }

        // 添加页面加载完成后的初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 从本地存储获取音乐设置
            const savedMusic = localStorage.getItem('background-music');
            const savedMusicVolume = localStorage.getItem('music-volume');
            
            console.log('从localStorage读取的音乐设置:', savedMusic, savedMusicVolume);
            
            // 页面加载后自动播放音乐
            if (savedMusic && savedMusic !== 'none') {
                setTimeout(() => {
                    window.globalMusicPlayer.play();
                }, 1000); // 延迟1秒确保页面加载完成
            }
            
            // 为链接按钮添加点击效果
            const startButton = document.querySelector('.start-button');
            startButton.addEventListener('click', function(e) {
                // 添加按钮点击效果
                this.style.transform = 'scale(0.95)';
                this.style.boxShadow = '0 0 30px rgba(212, 175, 55, 0.8)';
                
                // 确保音乐继续播放到下一个页面
                saveMusicState();
            });
            
            // 为纸张添加随机效果
            const papers = document.querySelectorAll('.paper');
            papers.forEach((paper, index) => {
                // 为每张纸添加轻微的随机延迟
                const randomDelay = Math.random() * 5;
                paper.style.animationDelay = `${randomDelay}s`;
                
                // 添加轻微的随机大小变化
                const randomScale = 0.8 + Math.random() * 0.4;
                paper.style.transform = `scale(${randomScale})`;
            });
            
            // 添加用户交互监听器，尝试自动播放
            document.addEventListener('click', tryAutoPlay);
            document.addEventListener('keydown', tryAutoPlay);
            document.addEventListener('touchstart', tryAutoPlay);
        });
        
        // 尝试自动播放函数
        function tryAutoPlay() {
            if (window.globalMusicPlayer && !window.globalMusicPlayer.isPlaying) {
                window.globalMusicPlayer.play().then(() => {
                    console.log('用户交互后自动播放成功');
                    // 移除覆盖层（如果存在）
                    const overlay = document.getElementById('global-music-overlay');
                    if (overlay) {
                        document.body.removeChild(overlay);
                    }
                }).catch(error => {
                    console.log('用户交互后自动播放失败:', error);
                });
            }
            
            // 移除事件监听器，避免重复执行
            document.removeEventListener('click', tryAutoPlay);
            document.removeEventListener('keydown', tryAutoPlay);
            document.removeEventListener('touchstart', tryAutoPlay);
        }
    </script>
</body>
</html>